{"ast":null,"code":"import * as types from './../constans/index';\nvar data = JSON.parse(localStorage.getItem(\"CART\"));\nvar initialState = data ? data : [];\n\nconst cart = (state = initialState, action) => {\n  let {\n    product,\n    quantity\n  } = action;\n  let index = -1;\n\n  switch (action.type) {\n    case types.ADD_TO_CART:\n      index = findProductInCart(state, product);\n\n      if (index !== -1) {\n        state[index].quantity += quantity;\n      } else {\n        state.push({\n          product,\n          quantity\n        });\n      }\n\n      localStorage.setItem('CART', JSON.stringify(state));\n      return [...state];\n\n    case types.DELETE_PRODUCT_IN_CART:\n      index = findProductInCart(state, product);\n\n      if (index !== -1) {\n        state.splice(index, 1);\n      }\n\n      localStorage.setItem('CART', JSON.stringify(state));\n      return [...state];\n\n    case types.UPDATE_PRODUCT_IN_CART:\n    default:\n      return [...state];\n  }\n};\n\nlet findProductInCart = (cart, product) => {\n  let index = -1;\n\n  if (cart.length > 0) {\n    for (let i = 0; i < cart.length; i++) {\n      if (cart[i].product.id === product.id) {\n        //console.log(index);\n        index = i;\n        break;\n      }\n    }\n  }\n\n  return index;\n};\n\nexport default cart;","map":{"version":3,"sources":["D:/Hoc Tap/cartproject/src/reducers/cart.js"],"names":["types","data","JSON","parse","localStorage","getItem","initialState","cart","state","action","product","quantity","index","type","ADD_TO_CART","findProductInCart","push","setItem","stringify","DELETE_PRODUCT_IN_CART","splice","UPDATE_PRODUCT_IN_CART","length","i","id"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,qBAAvB;AAEA,IAAIC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAX;AAEA,IAAIC,YAAY,GAAGL,IAAI,GAAGA,IAAH,GAAU,EAAjC;;AAGA,MAAMM,IAAI,GAAG,CAACC,KAAK,GAAGF,YAAT,EAAuBG,MAAvB,KAAkC;AAC3C,MAAI;AAACC,IAAAA,OAAD;AAAUC,IAAAA;AAAV,MAAsBF,MAA1B;AACA,MAAIG,KAAK,GAAG,CAAC,CAAb;;AACA,UAAOH,MAAM,CAACI,IAAd;AACI,SAAKb,KAAK,CAACc,WAAX;AACIF,MAAAA,KAAK,GAAGG,iBAAiB,CAACP,KAAD,EAAQE,OAAR,CAAzB;;AACA,UAAGE,KAAK,KAAK,CAAC,CAAd,EAAgB;AACZJ,QAAAA,KAAK,CAACI,KAAD,CAAL,CAAaD,QAAb,IAAyBA,QAAzB;AACH,OAFD,MAEK;AACDH,QAAAA,KAAK,CAACQ,IAAN,CAAW;AACXN,UAAAA,OADW;AAEXC,UAAAA;AAFW,SAAX;AAIH;;AACDP,MAAAA,YAAY,CAACa,OAAb,CAAqB,MAArB,EAA6Bf,IAAI,CAACgB,SAAL,CAAeV,KAAf,CAA7B;AACA,aAAO,CAAC,GAAGA,KAAJ,CAAP;;AACJ,SAAKR,KAAK,CAACmB,sBAAX;AACIP,MAAAA,KAAK,GAAGG,iBAAiB,CAACP,KAAD,EAAQE,OAAR,CAAzB;;AACA,UAAGE,KAAK,KAAK,CAAC,CAAd,EAAgB;AACZJ,QAAAA,KAAK,CAACY,MAAN,CAAaR,KAAb,EAAoB,CAApB;AACH;;AACDR,MAAAA,YAAY,CAACa,OAAb,CAAqB,MAArB,EAA6Bf,IAAI,CAACgB,SAAL,CAAeV,KAAf,CAA7B;AACA,aAAO,CAAC,GAAGA,KAAJ,CAAP;;AACJ,SAAKR,KAAK,CAACqB,sBAAX;AACA;AAAU,aAAO,CAAC,GAAGb,KAAJ,CAAP;AArBd;AAuBH,CA1BD;;AA2BC,IAAIO,iBAAiB,GAAE,CAACR,IAAD,EAAOG,OAAP,KAAmB;AACtC,MAAIE,KAAK,GAAE,CAAC,CAAZ;;AACD,MAAGL,IAAI,CAACe,MAAL,GAAc,CAAjB,EAAmB;AACf,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGhB,IAAI,CAACe,MAAzB,EAAiCC,CAAC,EAAlC,EAAsC;AAClC,UAAGhB,IAAI,CAACgB,CAAD,CAAJ,CAAQb,OAAR,CAAgBc,EAAhB,KAAuBd,OAAO,CAACc,EAAlC,EAAqC;AACjC;AACAZ,QAAAA,KAAK,GAAGW,CAAR;AACA;AACH;AAEH;AACL;;AACA,SAAOX,KAAP;AACH,CAbD;;AAeD,eAAeL,IAAf","sourcesContent":["import * as types from './../constans/index'\r\n\r\nvar data = JSON.parse(localStorage.getItem(\"CART\"))\r\n\r\nvar initialState = data ? data : []\r\n\r\n\r\nconst cart = (state = initialState, action) => {\r\n    let {product, quantity} = action;\r\n    let index = -1;\r\n    switch(action.type){\r\n        case types.ADD_TO_CART:\r\n            index = findProductInCart(state, product)\r\n            if(index !== -1){\r\n                state[index].quantity += quantity\r\n            }else{\r\n                state.push({\r\n                product,\r\n                quantity\r\n            })\r\n            }\r\n            localStorage.setItem('CART', JSON.stringify(state))\r\n            return [...state]\r\n        case types.DELETE_PRODUCT_IN_CART:\r\n            index = findProductInCart(state, product)\r\n            if(index !== -1){\r\n                state.splice(index, 1)\r\n            }\r\n            localStorage.setItem('CART', JSON.stringify(state))\r\n            return [...state]\r\n        case types.UPDATE_PRODUCT_IN_CART:\r\n        default : return [...state]\r\n    }\r\n}\r\n let findProductInCart =(cart, product) => {\r\n     let index =-1;\r\n    if(cart.length > 0){\r\n        for (let i = 0; i < cart.length; i++) {\r\n            if(cart[i].product.id === product.id){\r\n                //console.log(index);\r\n                index = i;\r\n                break;\r\n            }\r\n             \r\n         }\r\n    }\r\n     return index\r\n }\r\n\r\nexport default cart"]},"metadata":{},"sourceType":"module"}